import{u as D,b,ac as U,ad as C,_ as L,ae as $}from"./index-CHwpmOGh.js";import{g as F,u as q,a as E}from"./useToastNotification-Dg0dwsoN.js";import{s as A,u as y}from"./index-DHYahRQn.js";import{f as x,o as w,s as o,h as t,S as _,l as B,b as l,a2 as M,F as P,X as N}from"./vendor-BuBAKVoB.js";var O={name:"Dropdown",extends:F,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}};const j={class:"fixed flex gap-4 top-8 right-8"},R={class:"relative"},J={__name:"FloatingConfigurator",setup(m){const{toggleDarkMode:c,isDarkTheme:n}=D();return(d,i)=>{const a=b,r=U;return w(),x("div",j,[o(a,{type:"button",onClick:_(c),rounded:"",icon:_(n)?"pi pi-moon":"pi pi-sun",severity:"secondary"},null,8,["onClick","icon"]),t("div",R,[B(o(a,{icon:"pi pi-palette",type:"button",rounded:""},null,512),[[r,{selector:"@next",enterFromClass:"hidden",enterActiveClass:"animate-scalein",leaveToClass:"hidden",leaveActiveClass:"animate-fadeout",hideOnOutsideClick:!0}]]),o(C)])])}}},W={class:"bg-surface-50 dark:bg-surface-950 flex items-center justify-center min-h-screen min-w-[100vw] overflow-hidden"},X={class:"flex flex-col items-center justify-center p-4 sm:p-0"},Y={class:"w-full max-w-md bg-surface-0 dark:bg-surface-900 py-12 px-8 sm:px-12 rounded-3xl shadow-lg",style:{"border-radius":"53px"},"aria-live":"polite","aria-atomic":"true",role:"form"},z={class:"mb-6"},G={class:"mb-6"},H={class:"mb-6"},K={__name:"LoginView",setup(m){const{alertInfo:c,alertError:n}=q(),d=l(null),i=l(!1),a=l(""),r=l(""),p=$(),S=N(),v=l([{name:"AD User",code:"LDAP"},{name:"System User",code:"SYSTEM"}]),g=l(""),f=l(v.value[1]);async function k(){if(d.value=null,i.value=!0,!a.value||!r.value){n("Input Required","Staff ID and Password are required."),i.value=!1;return}await y.encryptText(r.value).then(s=>{g.value=s.data});try{const s=await p.login({employeeId:a.value,password:g.value,type:f.value.code,isEncrypt:!0});if(s.status=="200"){localStorage.setItem("employeeId",a.value),p.setToken(s.token),c("Successful login",s.message),S.push("/");try{setTimeout(async()=>{y.getUserInfo({employeeId:a.value.toString()}).then(e=>{localStorage.setItem("userInfo",JSON.stringify(e.data.data)),p.setUserInfoStat()})},100)}catch(e){n("Login Failed",e.value)}}else n("Login Failed",s.message)}catch(s){n("Login Failed",s.value)}finally{i.value=!1}}return(s,e)=>{const I=E,h=A,T=O,V=b;return w(),x(P,null,[o(J),t("div",W,[t("div",X,[t("div",Y,[e[6]||(e[6]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-surface-900 dark:text-surface-0 text-3xl font-bold mb-4"}," Welcome to Database Monitoring Systems! "),t("p",{class:"text-muted-color font-medium"},"Sign in to continue")],-1)),t("form",{onSubmit:M(k,["prevent"])},[t("div",z,[e[3]||(e[3]=t("label",{for:"staffId",class:"block text-surface-900 dark:text-surface-0 text-lg font-medium mb-2"},"Staff ID",-1)),o(I,{id:"staffId",type:"text",placeholder:"Enter your Staff ID",class:"w-full",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),"aria-required":"true","aria-invalid":!!d.value&&a.value==="","aria-describedby":"staffId-error",required:"true",autofocus:"true"},null,8,["modelValue","aria-invalid"])]),t("div",G,[e[4]||(e[4]=t("label",{for:"password",class:"block text-surface-900 dark:text-surface-0 font-medium text-lg mb-2"},"Password",-1)),o(h,{id:"password",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=u=>r.value=u),placeholder:"Enter your password",toggleMask:!0,class:"w-full",fluid:"",feedback:!1,"aria-required":"true","aria-invalid":!!d.value&&r.value==="","aria-describedby":"password-error",autocomplete:"current-password"},null,8,["modelValue","aria-invalid"])]),t("div",H,[e[5]||(e[5]=t("label",{for:"userType",class:"block text-surface-900 dark:text-surface-0 text-lg font-medium mb-2"},"User Type",-1)),o(T,{id:"userType",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=u=>f.value=u),options:v.value,optionLabel:"name",placeholder:"Select a User Type",class:"w-full","aria-required":"true"},null,8,["modelValue","options"])]),o(V,{type:"submit",label:"Sign In",class:"w-full text-lg py-3",loading:i.value,disabled:i.value},null,8,["loading","disabled"])],32)])])])],64)}}},ae=L(K,[["__scopeId","data-v-e9590675"]]);export{ae as default};
