import{f as o,h as s,a as h,W as g,t as m,l as u,a3 as d,o as n}from"./vendor-BuBAKVoB.js";import{_ as p}from"./index-BaSyFytH.js";const P={name:"UserProfile",data(){return{fileData:null,fileName:"profile_image",fileType:"",message:"",userProfile:{username:"",email:"",profileImage:""},tempSettings:{username:"",email:""}}},mounted(){this.loadUserProfile()},methods:{loadUserProfile(){const i=localStorage.getItem("userProfile");if(i)try{this.userProfile=JSON.parse(i),this.userProfile.profileImage&&!this.userProfile.profileImage.startsWith("data:")&&(this.userProfile.profileImage=`data:${this.userProfile.fileType||"image/jpeg"};base64,${this.userProfile.profileImage}`),this.tempSettings={username:this.userProfile.username||"",email:this.userProfile.email||""},this.message="Profile loaded from localStorage"}catch(e){this.message=`Error loading profile: ${e.message}`}else this.message="No user profile found in localStorage"},handleFileChange(i){var e,l;this.fileData=i.target.files[0],this.fileName=((e=this.fileData)==null?void 0:e.name)||"profile_image",this.fileType=((l=this.fileData)==null?void 0:l.type)||"image/jpeg",this.message=this.fileData?"Image selected":"No image selected"},async fetchFileFromApi(){try{const i=await fetch("YOUR_API_ENDPOINT",{method:"GET",headers:{}});if(!i.ok)throw new Error("Network response was not ok");this.fileData=await i.blob();const e=i.headers.get("Content-Disposition");if(e){const l=e.match(/filename="([^"]+)"/);l&&(this.fileName=l[1])}this.fileType=this.fileData.type||i.headers.get("Content-Type")||"image/jpeg",this.message="Image downloaded successfully!"}catch(i){this.message=`Error downloading image: ${i.message}`}},saveProfileImage(){if(!this.fileData){this.message="No image to save";return}const i=new FileReader;i.onload=e=>{const l=e.target.result.split(",")[1];try{this.userProfile.profileImage=`data:${this.fileType};base64,${l}`,this.userProfile.fileType=this.fileType,localStorage.setItem("userProfile",JSON.stringify(this.userProfile)),this.message="Profile image saved successfully!"}catch(f){this.message=`Error saving profile image: ${f.message}`}},i.onerror=()=>{this.message="Error reading image"},i.readAsDataURL(this.fileData)},saveSettings(){try{this.userProfile.username=this.tempSettings.username,this.userProfile.email=this.tempSettings.email,localStorage.setItem("userProfile",JSON.stringify(this.userProfile)),this.message="Settings saved successfully!"}catch(i){this.message=`Error saving settings: ${i.message}`}}}},c={class:"container"},y={class:"profile-info"},v={key:0,class:"profile-image"},S=["src"],I={key:1,class:"no-image"},N={class:"info"},D={class:"section"},b=["disabled"],E={class:"section"},_={class:"form-group"},w={class:"form-group"},C={key:0,class:"message"};function T(i,e,l,f,t,a){return n(),o("div",c,[e[12]||(e[12]=s("h2",null,"User Profile",-1)),s("div",y,[t.userProfile.profileImage?(n(),o("div",v,[s("img",{src:t.userProfile.profileImage,alt:"Profile Image",style:{"max-width":"200px","border-radius":"50%"}},null,8,S)])):(n(),o("div",I,"No profile image set")),s("div",N,[s("p",null,[e[6]||(e[6]=s("strong",null,"Username:",-1)),g(" "+m(t.userProfile.username||"Not set"),1)]),s("p",null,[e[7]||(e[7]=s("strong",null,"Email:",-1)),g(" "+m(t.userProfile.email||"Not set"),1)])])]),s("div",D,[e[8]||(e[8]=s("h3",null,"Change Profile Image",-1)),s("input",{type:"file",onChange:e[0]||(e[0]=(...r)=>a.handleFileChange&&a.handleFileChange(...r)),accept:"image/*"},null,32),s("button",{onClick:e[1]||(e[1]=(...r)=>a.fetchFileFromApi&&a.fetchFileFromApi(...r))},"Download Image from API"),s("button",{onClick:e[2]||(e[2]=(...r)=>a.saveProfileImage&&a.saveProfileImage(...r)),disabled:!t.fileData},"Save Profile Image",8,b)]),s("div",E,[e[11]||(e[11]=s("h3",null,"Change Settings",-1)),s("div",_,[e[9]||(e[9]=s("label",{for:"username"},"Username:",-1)),u(s("input",{id:"username","onUpdate:modelValue":e[3]||(e[3]=r=>t.tempSettings.username=r),type:"text",placeholder:"Enter username"},null,512),[[d,t.tempSettings.username]])]),s("div",w,[e[10]||(e[10]=s("label",{for:"email"},"Email:",-1)),u(s("input",{id:"email","onUpdate:modelValue":e[4]||(e[4]=r=>t.tempSettings.email=r),type:"email",placeholder:"Enter email"},null,512),[[d,t.tempSettings.email]])]),s("button",{onClick:e[5]||(e[5]=(...r)=>a.saveSettings&&a.saveSettings(...r))},"Save Settings")]),t.message?(n(),o("div",C,m(t.message),1)):h("",!0)])}const F=p(P,[["render",T],["__scopeId","data-v-3a0643b1"]]);export{F as default};
