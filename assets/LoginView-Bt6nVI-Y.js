import{u as C,b,ac as D,ad as L,_ as U,ae as F}from"./index-BaSyFytH.js";import{u as $,a as q,g as E}from"./useToastNotification-BZGu8uGc.js";import{s as A,u as g}from"./index-CPTDo29i.js";import{f as _,o as x,s as o,h as t,S as y,l as B,b as r,a2 as M,F as P,X as N}from"./vendor-BuBAKVoB.js";const O={class:"fixed flex gap-4 top-8 right-8"},j={class:"relative"},R={__name:"FloatingConfigurator",setup(w){const{toggleDarkMode:c,isDarkTheme:n}=C();return(d,i)=>{const a=b,l=D;return x(),_("div",O,[o(a,{type:"button",onClick:y(c),rounded:"",icon:y(n)?"pi pi-moon":"pi pi-sun",severity:"secondary"},null,8,["onClick","icon"]),t("div",j,[B(o(a,{icon:"pi pi-palette",type:"button",rounded:""},null,512),[[l,{selector:"@next",enterFromClass:"hidden",enterActiveClass:"animate-scalein",leaveToClass:"hidden",leaveActiveClass:"animate-fadeout",hideOnOutsideClick:!0}]]),o(L)])])}}},J={class:"bg-surface-50 dark:bg-surface-950 flex items-center justify-center min-h-screen min-w-[100vw] overflow-hidden"},W={class:"flex flex-col items-center justify-center p-4 sm:p-0"},X={class:"w-full max-w-md bg-surface-0 dark:bg-surface-900 py-12 px-8 sm:px-12 rounded-3xl shadow-lg",style:{"border-radius":"53px"},"aria-live":"polite","aria-atomic":"true",role:"form"},Y={class:"mb-6"},z={class:"mb-6"},G={class:"mb-6"},H={__name:"LoginView",setup(w){const{alertInfo:c,alertError:n}=$(),d=r(null),i=r(!1),a=r(""),l=r(""),f=F(),S=N(),m=r([{name:"AD User",code:"LDAP"},{name:"System User",code:"SYSTEM"}]),v=r(""),p=r(m.value[1]);async function k(){if(d.value=null,i.value=!0,!a.value||!l.value){n("Input Required","Staff ID and Password are required."),i.value=!1;return}await g.encryptText(l.value).then(s=>{v.value=s.data});try{const s=await f.login({employeeId:a.value,password:v.value,type:p.value.code,isEncrypt:!0});if(s.status=="200"){localStorage.setItem("employeeId",a.value),f.setToken(s.token),c("Successful login",s.message),S.push("/");try{setTimeout(async()=>{g.getUserInfo({employeeId:a.value.toString()}).then(e=>{localStorage.setItem("userInfo",JSON.stringify(e.data.data)),f.setUserInfoStat()})},100)}catch(e){n("Login Failed",e.value)}}else n("Login Failed",s.message)}catch(s){n("Login Failed",s.value)}finally{i.value=!1}}return(s,e)=>{const I=q,h=A,T=E,V=b;return x(),_(P,null,[o(R),t("div",J,[t("div",W,[t("div",X,[e[6]||(e[6]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-surface-900 dark:text-surface-0 text-3xl font-bold mb-4"}," Welcome to Database Monitoring Systems! "),t("p",{class:"text-muted-color font-medium"},"Sign in to continue")],-1)),t("form",{onSubmit:M(k,["prevent"])},[t("div",Y,[e[3]||(e[3]=t("label",{for:"staffId",class:"block text-surface-900 dark:text-surface-0 text-lg font-medium mb-2"},"Staff ID",-1)),o(I,{id:"staffId",type:"text",placeholder:"Enter your Staff ID",class:"w-full",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),"aria-required":"true","aria-invalid":!!d.value&&a.value==="","aria-describedby":"staffId-error",required:"true",autofocus:"true"},null,8,["modelValue","aria-invalid"])]),t("div",z,[e[4]||(e[4]=t("label",{for:"password",class:"block text-surface-900 dark:text-surface-0 font-medium text-lg mb-2"},"Password",-1)),o(h,{id:"password",modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=u=>l.value=u),placeholder:"Enter your password",toggleMask:!0,class:"w-full",fluid:"",feedback:!1,"aria-required":"true","aria-invalid":!!d.value&&l.value==="","aria-describedby":"password-error",autocomplete:"current-password"},null,8,["modelValue","aria-invalid"])]),t("div",G,[e[5]||(e[5]=t("label",{for:"userType",class:"block text-surface-900 dark:text-surface-0 text-lg font-medium mb-2"},"User Type",-1)),o(T,{id:"userType",modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=u=>p.value=u),options:m.value,optionLabel:"name",placeholder:"Select a User Type",class:"w-full","aria-required":"true"},null,8,["modelValue","options"])]),o(V,{type:"submit",label:"Sign In",class:"w-full text-lg py-3",loading:i.value,disabled:i.value},null,8,["loading","disabled"])],32)])])])],64)}}},te=U(H,[["__scopeId","data-v-6b85e96a"]]);export{te as default};
